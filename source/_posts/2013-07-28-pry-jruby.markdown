---
layout: post
title: "Build an Interative Prompt for your Java application."
date: 2013-07-28 23:58
comments: true
categories:
- jruby
- gemjars
- pry
- java
---

Tools
-----

[Maven](http://maven.apache.org) will be used to build this application, but
the approach can be ported to [Gradle](http://gradle.org) trivially.

[Pry](http://pryrepl.org/) is an awesome RubyGem which gives a bit more polished IRB.

[JRuby](http://jruby.org) allows you to use Pry as an interactive prompt for
your java application.

The Code
--------
For this exercise we will be using [Maven](http://maven.apache.org) to build
our application.

Maven uses a pom.xml file to declare dependencies and additional build logic.
Start with a basic pom.xml.

<script src="https://gist.github.com/akiellor/6102781.js?file=pom-empty.xml"></script>

Next some dependencies. It important to add the additional 'gemjars' repository.
The 'gemjars' repository is a mirror of RubyGems, but is structured in a way that is suitable for use with Maven.

<script src="https://gist.github.com/akiellor/6102781.js?file=pom-dependencies.xml"></script>

We'll add configuration for the Maven java compiler and the maven-shade-plugin.
The compiler configuration is provided to tell Maven to compile for version 1.6
of java. The maven-shade-plugin is a way of packaging a java application into a
'fatjar'.

<script src="https://gist.github.com/akiellor/6102781.js?file=pom-plugins.xml"></script>

A regular java main-class (***src/main/java/com/example/pry/Main.java***) is used
to start JRuby and Pry.

<script src="https://gist.github.com/akiellor/6102781.js?file=Main.java"></script>

Build
-----

```
$ mvn clean package
```

Run It
------

```
$ java -jar target/pry-0.0.1-SNAPSHOT-shaded.jar
```

